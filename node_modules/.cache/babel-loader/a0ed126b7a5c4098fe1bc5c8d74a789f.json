{"ast":null,"code":"import _asyncToGenerator from\"/Users/sebestyenboglarka/Desktop/_uWu/MIT_MERN_2021-'22/3rd semester/badbank_backend_test/betterbank_frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/sebestyenboglarka/Desktop/_uWu/MIT_MERN_2021-'22/3rd semester/badbank_backend_test/betterbank_frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/Users/sebestyenboglarka/Desktop/_uWu/MIT_MERN_2021-'22/3rd semester/badbank_backend_test/betterbank_frontend/node_modules/@babel/runtime/regenerator/index.js\";import React,{useContext,useState,useEffect}from'react';import{MyContext}from\"../myContext/MyContext\";import Cookies from\"js-cookie\";import Card from\"../components/Card\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function AllData(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),transactions=_useState2[0],setTransactions=_useState2[1];var _useContext=useContext(MyContext),authenticateWithAPI=_useContext.authenticateWithAPI,setError=_useContext.setError;useEffect(function(){getAlldata();},[]);function getAlldata(){return _getAlldata.apply(this,arguments);}function _getAlldata(){_getAlldata=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var userToken,username,API_URL,response,responseObj,error;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:userToken=Cookies.get(\"token\");if(!userToken){authenticateWithAPI();userToken=Cookies.get(\"token\");}username=Cookies.get(\"username\");if(username){_context.next=5;break;}return _context.abrupt(\"return\");case 5:API_URL=process.env.NEXT_PUBLIC_API_URL||\"http://localhost:1337\";_context.next=8;return fetch(\"\".concat(API_URL,\"/transactions/alltransactions\"),{method:\"POST\",headers:userToken&&{Authorization:\"Bearer \".concat(userToken)},body:JSON.stringify({username:username})});case 8:response=_context.sent;if(response.ok){_context.next=14;break;}console.log(response.statusText);setError(response.statusText);_context.next=22;break;case 14:_context.next=16;return response.json();case 16:responseObj=_context.sent;error=responseObj.error;if(!error){_context.next=21;break;}setError(error);return _context.abrupt(\"return\");case 21:setTransactions(responseObj);case 22:;case 23:case\"end\":return _context.stop();}}},_callee);}));return _getAlldata.apply(this,arguments);};return/*#__PURE__*/_jsx(Card,{bgcolor:\"warning\",header:\"All Transactions\",body:/*#__PURE__*/_jsx(\"div\",{className:\"getalldata\",children:/*#__PURE__*/_jsx(\"table\",{children:/*#__PURE__*/_jsxs(\"tbody\",{children:[/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"To\"}),/*#__PURE__*/_jsx(\"th\",{children:\"From\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Amount\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Date\"})]}),transactions.map(function(transaction,index){function formatMyDate(value){var locale=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'en-US';return new Date(value).toLocaleDateString(locale);}var timestamp=transaction.createdAt;return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:transaction.to}),/*#__PURE__*/_jsx(\"td\",{children:transaction.from}),/*#__PURE__*/_jsx(\"td\",{children:transaction.amount}),/*#__PURE__*/_jsx(\"td\",{children:formatMyDate(timestamp)})]},index);})]})})})/* <br/>\r\n\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t<table>\r\n\t\t\t\t\t\t\t\t<tbody>\r\n\t\t\t\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t\t\t\t<th>From</th>\r\n\t\t\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t\t\t\t{transactions.map((transaction, index) => {\r\n\t\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t\t<tr key={index} className=\"alldata\" style={{display:\"inline-block\"}}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<td>{transaction.from}</td>\r\n\t\t\t\t\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\t</tbody>\r\n\t\t\t\t\t\t\t</table> \r\n\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t<br/>\r\n\t\t\t\t\t</><>\r\n\t\t\t\t\t<table>\r\n\t\t\t\t\t\t<tbody>\r\n\t\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t\t<th>Amount</th>\r\n\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t\t{transactions.map((transaction, index) => {\r\n\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t<tr key={index} className=\"alldata\" style={{display:\"inline-block\"}}>\r\n\t\t\t\t\t\t\t\t\t\t<td>{transaction.amount}</td>\r\n\t\t\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t</tbody>\r\n\t\t\t\t\t</table> \r\n\t\t\t\t\t<br/>\r\n\t\t\t\t\t</></><>\r\n\t\t\t\t\t<table>\r\n\t\t\t\t\t\t\t<tbody>\r\n\t\t\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t\t\t<th>Date</th>\r\n\t\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t\t\t{transactions.map((transaction, index) => {\r\n\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t<tr key={index} className=\"alldata\" style={{display:\"inline-block\"}}>\r\n\t\t\t\t\t\t\t\t\t\t\t<td>{transaction.createdAt}</td>\r\n\t\t\t\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t</tbody>\r\n\t\t\t\t\t\t</table> \r\n\t\t\t\t\t</></> */});};export default AllData;","map":{"version":3,"sources":["/Users/sebestyenboglarka/Desktop/_uWu/MIT_MERN_2021-'22/3rd semester/badbank_backend_test/betterbank_frontend/src/pages/AllData.js"],"names":["React","useContext","useState","useEffect","MyContext","Cookies","Card","AllData","transactions","setTransactions","authenticateWithAPI","setError","getAlldata","userToken","get","username","API_URL","process","env","NEXT_PUBLIC_API_URL","fetch","method","headers","Authorization","body","JSON","stringify","response","ok","console","log","statusText","json","responseObj","error","map","transaction","index","formatMyDate","value","locale","Date","toLocaleDateString","timestamp","createdAt","to","from","amount"],"mappings":"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","sourcesContent":["import React, {useContext, useState, useEffect} from 'react';\r\nimport {MyContext} from \"../myContext/MyContext\";\r\nimport Cookies from \"js-cookie\";\r\nimport Card from \"../components/Card\";\r\n\r\n\r\nfunction AllData() {\r\n\r\n\tlet [transactions, setTransactions] = useState([]);\r\n\r\n\tconst {\r\n\t\tauthenticateWithAPI,\r\n\t\tsetError,\r\n\t} = useContext(MyContext);\r\n\r\n\tuseEffect(()=> {\r\n\t\tgetAlldata();\r\n\t}, []); \r\n\r\n\r\n\tasync function getAlldata() {\r\n\r\n\t\tlet userToken = Cookies.get(\"token\");\r\n\t\tif (!userToken) {\r\n\t\t\tauthenticateWithAPI();\r\n\t\t\tuserToken = Cookies.get(\"token\");\r\n\t\t}\r\n\r\n\t\tlet username = Cookies.get(\"username\");\r\n\t\tif (!username) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst API_URL = process.env.NEXT_PUBLIC_API_URL || \"http://localhost:1337\";\r\n\t\tconst response = await fetch(`${API_URL}/transactions/alltransactions`, {\r\n\t\t\tmethod: \"POST\",\r\n\t\t\theaders: userToken && { Authorization: `Bearer ${userToken}` },\r\n\t\t\tbody: JSON.stringify({\r\n\t\t\t\tusername: username\r\n\t\t\t}),\r\n\t\t});\r\n\r\n\t\tif (!response.ok) {\r\n\t\t\tconsole.log(response.statusText)\r\n\t\t\tsetError(response.statusText);\r\n\t\t\t} else {\r\n\t\t\t\tconst responseObj = await response.json();\r\n\t\t\t\tconst error = responseObj.error;\r\n\t\t\t\tif (error) {\r\n\t\t\t\t\tsetError(error);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tsetTransactions(responseObj);\r\n\t\t\t};\r\n\t\t};\r\n\r\n\t\t\r\n\t\treturn (\r\n\t\t\t<Card\r\n\t\t\t\tbgcolor=\"warning\"\r\n\t\t\t\theader=\"All Transactions\"\r\n\t\t\t\tbody={\r\n\t\t\t\t\t<div className=\"getalldata\">\r\n\t\t\t\t\t\t\t<table>\r\n\t\t\t\t\t\t\t\t<tbody>\r\n\t\t\t\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t\t\t\t<th>To</th>\r\n\t\t\t\t\t\t\t\t\t\t<th>From</th>\r\n\t\t\t\t\t\t\t\t\t\t<th>Amount</th>\r\n\t\t\t\t\t\t\t\t\t\t<th>Date</th>\r\n\t\t\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t\t\t\t{transactions.map((transaction, index) => {\r\n\r\n\t\t\t\t\t\t\t\t\t\tfunction formatMyDate(value, locale = 'en-US') {\r\n\t\t\t\t\t\t\t\t\t\t\treturn new Date(value).toLocaleDateString(locale);\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\t\tlet timestamp = transaction.createdAt;\r\n\r\n\t\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t\t<tr key={index}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<td>{transaction.to}</td>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<td>{transaction.from}</td>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<td>{transaction.amount}</td>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<td>{formatMyDate(timestamp)}</td>\r\n\t\t\t\t\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\t</tbody>\r\n\t\t\t\t\t\t\t</table> \r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t/* <br/>\r\n\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t<table>\r\n\t\t\t\t\t\t\t\t<tbody>\r\n\t\t\t\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t\t\t\t<th>From</th>\r\n\t\t\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t\t\t\t{transactions.map((transaction, index) => {\r\n\t\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t\t<tr key={index} className=\"alldata\" style={{display:\"inline-block\"}}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<td>{transaction.from}</td>\r\n\t\t\t\t\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\t</tbody>\r\n\t\t\t\t\t\t\t</table> \r\n\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t<br/>\r\n\t\t\t\t\t</><>\r\n\t\t\t\t\t<table>\r\n\t\t\t\t\t\t<tbody>\r\n\t\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t\t<th>Amount</th>\r\n\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t\t{transactions.map((transaction, index) => {\r\n\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t<tr key={index} className=\"alldata\" style={{display:\"inline-block\"}}>\r\n\t\t\t\t\t\t\t\t\t\t<td>{transaction.amount}</td>\r\n\t\t\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t</tbody>\r\n\t\t\t\t\t</table> \r\n\t\t\t\t\t<br/>\r\n\t\t\t\t\t</></><>\r\n\t\t\t\t\t<table>\r\n\t\t\t\t\t\t\t<tbody>\r\n\t\t\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t\t\t<th>Date</th>\r\n\t\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t\t\t{transactions.map((transaction, index) => {\r\n\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t<tr key={index} className=\"alldata\" style={{display:\"inline-block\"}}>\r\n\t\t\t\t\t\t\t\t\t\t\t<td>{transaction.createdAt}</td>\r\n\t\t\t\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t</tbody>\r\n\t\t\t\t\t\t</table> \r\n\t\t\t\t\t</></> */}\r\n\t\t\t\t\r\n\t\t\t/>\r\n\t\t)\r\n};\r\n\r\n\t\r\nexport default AllData;\r\n\r\n\r\n\r\n"]},"metadata":{},"sourceType":"module"}